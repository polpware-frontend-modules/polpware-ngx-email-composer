!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("ngx-chips"),require("rxjs")):"function"==typeof define&&define.amd?define("@polpware/ngx-email-composer",["exports","@angular/core","ngx-chips","rxjs"],t):t(((e=e||self).polpware=e.polpware||{},e.polpware["ngx-email-composer"]={}),e.ng.core,e.ngxChips)}(this,(function(e,t,n){"use strict";var i=function(){function e(){}return e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},imports:[[n.TagInputModule]]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(i,{imports:[n.TagInputModule]});var s=["emailInputBox"],o=["emailBody"];function r(e){var t=e.value;return/\S+@\S+\.\S+/.test(t)?null:{isValidEmail:!0}}var a,u=/[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*/g;function l(e){for(var t,n=[],i=0;t=u.exec(e);){var s=void 0;(s=e.substring(i,t.index).replace(/(^[\s,>]+)|"|([\s,<]+$)/g,""))?n.push('"'+s+'" <'+t[0]+">"):n.push(t[0]),i=t.index+t[0].length}return n}function m(e){for(var t,n=[];t=u.exec(e);)n.push(t[0]);return n}(a=e.AlertTypeEnum||(e.AlertTypeEnum={}))[a.none=0]="none",a[a.info=1]="info",a[a.warning=2]="warning",a[a.running=3]="running",a[a.success=4]="success",a[a.error=5]="error";var p=function(){function n(){this.onTextChange=new t.EventEmitter,this.onSubmit=new t.EventEmitter,this.onSent=new t.EventEmitter,this.validators=[r],this.errorMessages={isValidEmail:"Please input a valid email"},this.messageTitle="",this.emails=[],this.messageBody="",this.disableFocusEvent=!1}return Object.defineProperty(n.prototype,"isSubmitDisabled",{get:function(){return 0===this.emails.length||this.alertType===e.AlertTypeEnum.running},enumerable:!0,configurable:!0}),n.prototype.textChanged=function(e){this.showCloseBtn=!1,this.onTextChange.emit(e)},n.prototype.otherFieldChanged=function(){this.showCloseBtn=!1},n.prototype.submit=function(){var t=this,n=[];this.emails.forEach((function(e){m(e||e.value).forEach((function(e){n.push(e)}))}));var i={confirmed:!0,emailReceivers:n,emailBody:this.messageBody,emailTitle:this.messageTitle};this.sender&&(this.alertType=e.AlertTypeEnum.running,this.alertMessage="The email is being sent out ...",this.alertSubMessage="",this.alertDismissible=!1,this.sender(i).then((function(){t.alertType=e.AlertTypeEnum.info,t.alertMessage="Emails have been successfully sent out.",t.alertDismissible=!0,t.showCloseBtn=!0,t.onSent&&t.onSent.emit({success:!0})}),(function(n){t.alertType=e.AlertTypeEnum.error,t.alertMessage="Something went wrong.",t.alertDismissible=!0,t.alertSubMessage=n&&n.errorInfo?n.errorInfo:"",t.onSent&&t.onSent.emit({success:!1})}))),this.onSubmit&&this.onSubmit.emit(i)},n.prototype.onOutOfTagInput=function(e){var t=this;this.emailInputBox.dropdown&&this.emailInputBox.dropdown.isVisible||(this.disableFocusEvent||(e.preventDefault(),e.stopPropagation(),l(this.emailInputBox.formValue).forEach((function(e){t.emails.push(e)})),this.emailInputBox.setInputValue(""),this.disableFocusEvent=!0,this.emailBody.nativeElement.focus(),this.disableFocusEvent=!1))},n.ɵfac=function(e){return new(e||n)},n.ɵdir=t.ɵɵdefineDirective({type:n,viewQuery:function(e,n){var i;(1&e&&(t.ɵɵviewQuery(s,!0),t.ɵɵviewQuery(o,!0)),2&e)&&(t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.emailInputBox=i.first),t.ɵɵqueryRefresh(i=t.ɵɵloadQuery())&&(n.emailBody=i.first))},inputs:{messageTitle:"messageTitle",messageBody:"messageBody",autocompleteItemsAsync:"autocompleteItemsAsync",sender:"sender"},outputs:{onTextChange:"onTextChange",onSubmit:"onSubmit",onSent:"onSent"}}),n}();e.EmailFormAbstractComponent=p,e.NgxEmailComposerModule=i,e.isValidEmail=r,e.parseEmails=l,e.parseOnlyEmails=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polpware-ngx-email-composer.umd.min.js.map